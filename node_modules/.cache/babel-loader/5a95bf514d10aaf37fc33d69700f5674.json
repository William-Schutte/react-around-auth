{"ast":null,"code":"var BASE_URL='https://register.nomoreparties.co';export var register=function register(email,password){return fetch(\"\".concat(BASE_URL,\"/signup\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({\"password\":password,\"email\":email})}).then(function(res){if(res.status===201){return res.json();}else{throw new Error('Unsuccessful registration');}}).catch(function(err){return console.log(err);});};export var authorize=function authorize(email,password){return fetch(\"\".concat(BASE_URL,\"/signin\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({\"password\":password,\"email\":email})}).then(function(res){if(res.status===200){return res.json();}else{throw new Error('Unsuccessful login');}}).then(function(data){localStorage.setItem('jwt',data.token);return true;}).catch(function(err){return console.log(err);});};export var getUser=function getUser(token){return fetch(\"\".concat(BASE_URL,\"/users/me\"),{method:'GET',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)}}).then(function(res){if(res.status===200){return res.json();}});};","map":{"version":3,"sources":["/Users/william/Documents/Programming/Practicum/react-around-auth/src/utils/auth.js"],"names":["BASE_URL","register","email","password","fetch","method","headers","body","JSON","stringify","then","res","status","json","Error","catch","err","console","log","authorize","data","localStorage","setItem","token","getUser"],"mappings":"AAAA,GAAMA,CAAAA,QAAQ,CAAG,mCAAjB,CAEA,MAAO,IAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,KAAD,CAAQC,QAAR,CAAqB,CACzC,MAAOC,CAAAA,KAAK,WAAIJ,QAAJ,YAAuB,CAC/BK,MAAM,CAAE,MADuB,CAE/BC,OAAO,CAAE,CACL,eAAgB,kBADX,CAFsB,CAK/BC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAE,WAAYN,QAAd,CAAwB,QAASD,KAAjC,CAAf,CALyB,CAAvB,CAAL,CAMJQ,IANI,CAMC,SAACC,GAAD,CAAS,CACb,GAAIA,GAAG,CAACC,MAAJ,GAAe,GAAnB,CAAwB,CACpB,MAAOD,CAAAA,GAAG,CAACE,IAAJ,EAAP,CACH,CAFD,IAEO,CACH,KAAM,IAAIC,CAAAA,KAAJ,CAAU,2BAAV,CAAN,CACH,CACJ,CAZM,EAYJC,KAZI,CAYE,SAACC,GAAD,QAASC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAT,EAZF,CAAP,CAaH,CAdM,CAgBP,MAAO,IAAMG,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACjB,KAAD,CAAQC,QAAR,CAAqB,CAC1C,MAAOC,CAAAA,KAAK,WAAIJ,QAAJ,YAAuB,CAC/BK,MAAM,CAAE,MADuB,CAE/BC,OAAO,CAAE,CACL,eAAgB,kBADX,CAFsB,CAK/BC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAE,WAAYN,QAAd,CAAwB,QAASD,KAAjC,CAAf,CALyB,CAAvB,CAAL,CAMJQ,IANI,CAMC,SAACC,GAAD,CAAS,CACb,GAAIA,GAAG,CAACC,MAAJ,GAAe,GAAnB,CAAwB,CACpB,MAAOD,CAAAA,GAAG,CAACE,IAAJ,EAAP,CACH,CAFD,IAEO,CACH,KAAM,IAAIC,CAAAA,KAAJ,CAAU,oBAAV,CAAN,CACH,CACJ,CAZM,EAYJJ,IAZI,CAYC,SAACU,IAAD,CAAU,CACdC,YAAY,CAACC,OAAb,CAAqB,KAArB,CAA4BF,IAAI,CAACG,KAAjC,EACA,MAAO,KAAP,CACH,CAfM,EAeJR,KAfI,CAeE,SAACC,GAAD,QAASC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAT,EAfF,CAAP,CAgBH,CAjBM,CAmBP,MAAO,IAAMQ,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAACD,KAAD,CAAW,CAC9B,MAAOnB,CAAAA,KAAK,WAAIJ,QAAJ,cAAyB,CACjCK,MAAM,CAAE,KADyB,CAEjCC,OAAO,CAAE,CACL,eAAgB,kBADX,CAEL,iCAA2BiB,KAA3B,CAFK,CAFwB,CAAzB,CAAL,CAMJb,IANI,CAMC,SAACC,GAAD,CAAS,CACb,GAAIA,GAAG,CAACC,MAAJ,GAAe,GAAnB,CAAwB,CACpB,MAAOD,CAAAA,GAAG,CAACE,IAAJ,EAAP,CACH,CACJ,CAVM,CAAP,CAWH,CAZM","sourcesContent":["const BASE_URL = 'https://register.nomoreparties.co';\n\nexport const register = (email, password) => {\n    return fetch(`${BASE_URL}/signup`, {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ \"password\": password, \"email\": email })\n    }).then((res) => {\n        if (res.status === 201) {\n            return res.json();\n        } else {\n            throw new Error('Unsuccessful registration');\n        }\n    }).catch((err) => console.log(err));\n};\n\nexport const authorize = (email, password) => {\n    return fetch(`${BASE_URL}/signin`, {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ \"password\": password, \"email\": email })\n    }).then((res) => {\n        if (res.status === 200) {\n            return res.json();\n        } else {\n            throw new Error('Unsuccessful login');\n        }\n    }).then((data) => {\n        localStorage.setItem('jwt', data.token)\n        return true;\n    }).catch((err) => console.log(err));\n};\n\nexport const getUser = (token) => {\n    return fetch(`${BASE_URL}/users/me`, {\n        method: 'GET',\n        headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${token}`\n        }\n    }).then((res) => {\n        if (res.status === 200) {\n            return res.json();\n        }\n    })\n}"]},"metadata":{},"sourceType":"module"}