{"ast":null,"code":"import _classCallCheck from\"/Users/william/Documents/Programming/Practicum/react-around-auth/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/william/Documents/Programming/Practicum/react-around-auth/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";// ###########################  API Class  ########################################################\nvar Api=/*#__PURE__*/function(){function Api(options){_classCallCheck(this,Api);this.options=options;}// Function replaced by getUser in auth\n_createClass(Api,[{key:\"getUserInfo\",value:function getUserInfo(token){return fetch(\"\".concat(this.options.baseUrl,\"/user\"),{method:\"GET\",headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \".concat(token)}}).then(function(res){if(res.status===200){return res.json().data;}else{return Promise.reject(\"Error: \".concat(res.status));}});}},{key:\"patchUserInfo\",value:function patchUserInfo(_ref){var newName=_ref.name,newAbout=_ref.about,token=_ref.token;return fetch(\"\".concat(this.options.baseUrl,\"/user/me\"),{method:\"PATCH\",headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \".concat(token)},body:JSON.stringify({\"name\":newName,\"about\":newAbout})}).then(function(res){if(res.status===200){return res.json();}else{return Promise.reject(\"Error: \".concat(res.status));}});}},{key:\"patchUserPic\",value:function patchUserPic(_ref2){var newUrl=_ref2.avatar,token=_ref2.token;return fetch(\"\".concat(this.options.baseUrl,\"/user/me/avatar\"),{method:\"PATCH\",headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \".concat(token)},body:JSON.stringify({\"avatar\":newUrl})}).then(function(res){if(res.status===200){return res.json();}else{return Promise.reject(\"Error: \".concat(res.status));}});}},{key:\"getInitialCards\",value:function getInitialCards(token){return fetch(\"\".concat(this.options.baseUrl,\"/cards\"),{method:\"GET\",headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \".concat(token)}}).then(function(res){if(res.ok){return res.json();}else{return Promise.reject(\"Error: \".concat(res.status));}});}},{key:\"addNewCard\",value:function addNewCard(_ref3){var newName=_ref3.name,newLink=_ref3.link,token=_ref3.token;return fetch(\"\".concat(this.options.baseUrl,\"/cards\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \".concat(token)},body:JSON.stringify({name:newName,link:newLink})}).then(function(res){if(res.ok){return res.json();}else{return Promise.reject(\"Error: \".concat(res.status));}});}},{key:\"deleteCard\",value:function deleteCard(_ref4){var cardId=_ref4.cardId,token=_ref4.token;return fetch(\"\".concat(this.options.baseUrl,\"/cards/\").concat(cardId),{method:\"DELETE\",headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \".concat(token)}}).then(function(res){if(res.ok){return res.json();}else{return Promise.reject(\"Error: \".concat(res.status));}});}// And thus working here too\n},{key:\"likeCard\",value:function likeCard(_ref5){var cardData=_ref5.cardData,isLiked=_ref5.isLiked,token=_ref5.token;// If the card is already liked by the user, the like is removed, else a like is added\nif(isLiked){return fetch(\"\".concat(this.options.baseUrl,\"/cards/likes/\").concat(cardData._id),{method:\"DELETE\",headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \".concat(token)}}).then(function(res){if(res.ok){return res.json();}else{return Promise.reject(\"Error: \".concat(res.status));}});}else{return fetch(\"\".concat(this.options.baseUrl,\"/cards/likes/\").concat(cardData._id),{method:\"PUT\",headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \".concat(token)}}).then(function(res){if(res.ok){return res.json();}else{return Promise.reject(\"Error: \".concat(res.status));}});}}}]);return Api;}();var api=new Api({baseUrl:\"https://api.ws.p15.students.nomoreparties.site\"});// const api = new Api({\n//     baseUrl: \"https://around.nomoreparties.co/v1/group-1\",\n//     headers: {\n//         authorization: \"b3ddd9c8-cc64-4470-93b1-0840e92522c5\",\n//         \"Content-Type\": \"application/json\"\n//     }\n// });\nexport default api;","map":{"version":3,"sources":["/Users/william/Documents/Programming/Practicum/react-around-auth/src/utils/api.js"],"names":["Api","options","token","fetch","baseUrl","method","headers","then","res","status","json","data","Promise","reject","newName","name","newAbout","about","body","JSON","stringify","newUrl","avatar","ok","newLink","link","cardId","cardData","isLiked","_id","api"],"mappings":"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","sourcesContent":["// ###########################  API Class  ########################################################\n\nclass Api {\n    constructor(options) {\n      this.options = options;\n    }\n  \n    // Function replaced by getUser in auth\n    getUserInfo(token) {\n        return fetch(`${this.options.baseUrl}/user`, {\n            method: \"GET\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Authorization\": `Bearer ${token}`\n            },\n        })\n          .then(res => {\n            if (res.status === 200) {\n                return res.json().data;\n            } else {\n                return Promise.reject(`Error: ${res.status}`);\n            }\n          });\n    }\n\n    patchUserInfo({ name: newName, about: newAbout, token }) {\n        return fetch(`${this.options.baseUrl}/user/me`, {\n            method: \"PATCH\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Authorization\": `Bearer ${token}`\n            },\n            body: JSON.stringify({ \"name\": newName, \"about\": newAbout })\n        })\n            .then(res => {\n                if (res.status === 200) {\n                    return res.json();\n                } else {\n                    return Promise.reject(`Error: ${res.status}`);\n                }\n            });\n    }\n\n    patchUserPic({ avatar: newUrl, token }) {\n        return fetch(`${this.options.baseUrl}/user/me/avatar`, {\n            method: \"PATCH\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Authorization\": `Bearer ${token}`\n            },\n            body: JSON.stringify({ \"avatar\": newUrl })\n        })\n            .then(res => {\n                if (res.status === 200) {\n                    return res.json();\n                } else {\n                    return Promise.reject(`Error: ${res.status}`);\n                }\n            });\n    }\n\n    getInitialCards(token) {\n        return fetch(`${this.options.baseUrl}/cards`, {\n            method: \"GET\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Authorization\": `Bearer ${token}`\n            },\n        })\n          .then(res => {\n            if (res.ok) {\n                return res.json();\n            } else {\n                return Promise.reject(`Error: ${res.status}`);\n            }\n          });\n    }\n\n    addNewCard({ name: newName, link: newLink, token }) {\n        return fetch(`${this.options.baseUrl}/cards`, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Authorization\": `Bearer ${token}`\n            },\n            body: JSON.stringify({ name: newName, link: newLink })\n          })\n            .then(res => {\n              if (res.ok) {\n                  return res.json();\n              } else {\n                  return Promise.reject(`Error: ${res.status}`);\n              }\n            });\n    }\n\n    deleteCard({ cardId, token }) {\n        return fetch(`${this.options.baseUrl}/cards/${cardId}`, {\n            method: \"DELETE\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Authorization\": `Bearer ${token}`\n            },\n        })\n            .then(res => {\n                if (res.ok) {\n                    return res.json();\n                } else {\n                    return Promise.reject(`Error: ${res.status}`);\n                }\n            });\n    }\n\n    // And thus working here too\n    likeCard({ cardData, isLiked, token }) {\n        // If the card is already liked by the user, the like is removed, else a like is added\n        if (isLiked) {\n            return fetch(`${this.options.baseUrl}/cards/likes/${cardData._id}`, {\n                method: \"DELETE\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    \"Authorization\": `Bearer ${token}`\n                },\n            })\n                .then(res => {\n                    if (res.ok) {\n                        return res.json();\n                    } else {\n                        return Promise.reject(`Error: ${res.status}`);\n                    }\n                });\n        } else {\n            return fetch(`${this.options.baseUrl}/cards/likes/${cardData._id}`, {\n                method: \"PUT\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    \"Authorization\": `Bearer ${token}`\n                },\n            })\n                .then(res => {\n                    if (res.ok) {\n                        return res.json();\n                    } else {\n                        return Promise.reject(`Error: ${res.status}`);\n                    }\n                });\n        }\n        \n    }\n}\n\nconst api = new Api({\n    baseUrl: \"https://api.ws.p15.students.nomoreparties.site\",\n});\n\n// const api = new Api({\n//     baseUrl: \"https://around.nomoreparties.co/v1/group-1\",\n//     headers: {\n//         authorization: \"b3ddd9c8-cc64-4470-93b1-0840e92522c5\",\n//         \"Content-Type\": \"application/json\"\n//     }\n// });\n\nexport default api;"]},"metadata":{},"sourceType":"module"}