{"ast":null,"code":"import _toConsumableArray from\"/Users/william/Documents/Programming/Practicum/react-around-auth/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/william/Documents/Programming/Practicum/react-around-auth/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{Route,Switch,NavLink,useRouteMatch,useParams}from'react-router-dom';import Header from'./Header.js';import Main from'./Main.js';import Footer from'./Footer.js';import PopupWithForm from'./PopupWithForm.js';import ImagePopup from'./ImagePopup.js';import api from'../utils/api.js';import CurrentUserContext from'../contexts/CurrentUserContext.js';import EditProfilePopup from'./EditProfilePopup.js';import EditAvatarPopup from'./EditAvatarPopup.js';import AddPlacePopup from'./AddPlacePopup.js';function App(){// State variable fot the current user's info\nvar _React$useState=React.useState({}),_React$useState2=_slicedToArray(_React$useState,2),currentUser=_React$useState2[0],setCurrentUser=_React$useState2[1];// The effect hook with an empty second parameter will update once upon mounting,\n// i.e. one update after the API call\nReact.useEffect(function(){api.getUserInfo().then(function(res){setCurrentUser(res);}).catch(function(err){console.log(err);});},[]);// Declaration of three hooks that act as state variables for the visibility of each form\nvar _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),isEditProfileOpen=_React$useState4[0],setIsEditProfileOpen=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),isAddPlaceOpen=_React$useState6[0],setIsAddPlaceOpen=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),isEditAvatarOpen=_React$useState8[0],setIsEditAvatarOpen=_React$useState8[1];// Selected card hook for state of Image Popup\nvar _React$useState9=React.useState(null),_React$useState10=_slicedToArray(_React$useState9,2),selectedCard=_React$useState10[0],setSelectedCard=_React$useState10[1];function handleEditAvatarClick(){setIsEditAvatarOpen(true);}function handleEditProfileClick(){setIsEditProfileOpen(true);}function handleAddPlaceClick(){setIsAddPlaceOpen(true);}function closeAllPopups(){setIsEditAvatarOpen(false);setIsEditProfileOpen(false);setIsAddPlaceOpen(false);setSelectedCard(null);}function handleCardClick(card){setSelectedCard(card);}function handleUpdateUser(newInfo){api.patchUserInfo(newInfo).then(function(res){setCurrentUser(res);}).catch(function(err){console.log(err);});}function handleUpdateAvatar(avatar){api.patchUserPic(avatar).then(function(res){setCurrentUser(res);}).catch(function(err){console.log(err);});}// Card variables and functions\n// Declaration of hooks that act as state variables for cards\nvar _React$useState11=React.useState([]),_React$useState12=_slicedToArray(_React$useState11,2),cards=_React$useState12[0],setCards=_React$useState12[1];// Effect hook for updating of user info and cards\nReact.useEffect(function(){api.getInitialCards().then(function(res){setCards(res);}).catch(function(err){console.log(err);});},[]);function handleCardLike(card){var isLiked=card.likes.some(function(i){return i._id===currentUser._id;});api.likeCard(card,isLiked).then(function(res){var newCards=cards.map(function(c){return c._id===card._id?res:c;});setCards(newCards);}).catch(function(err){console.log(err);});}function handleCardDelete(card){api.deleteCard(card._id).then(function(){var newCards=cards.filter(function(c){return c._id!==card._id;});setCards(newCards);});}function handleAddPlace(card){api.addNewCard(card).then(function(res){var newCards=[].concat(_toConsumableArray(cards),[res]);setCards(newCards);});}return/*#__PURE__*/React.createElement(CurrentUserContext.Provider,{value:currentUser},/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/\"},/*#__PURE__*/React.createElement(Main,{onEditProfile:handleEditProfileClick,onAddPlace:handleAddPlaceClick,onEditAvatar:handleEditAvatarClick,onCardClick:handleCardClick,onClose:closeAllPopups,cards:cards,onCardLike:handleCardLike,onCardDelete:handleCardDelete}),/*#__PURE__*/React.createElement(Footer,null),/*#__PURE__*/React.createElement(EditProfilePopup,{isOpen:isEditProfileOpen,onClose:closeAllPopups,onUpdateUser:handleUpdateUser}),/*#__PURE__*/React.createElement(EditAvatarPopup,{isOpen:isEditAvatarOpen,onClose:closeAllPopups,onUpdateAvatar:handleUpdateAvatar}),/*#__PURE__*/React.createElement(AddPlacePopup,{isOpen:isAddPlaceOpen,onClose:closeAllPopups,onAddPlace:handleAddPlace}),/*#__PURE__*/React.createElement(PopupWithForm,{name:\"form-delete\",title:\"Are you sure?\",isOpen:null,btnText:\"Yes\",onClose:closeAllPopups}),/*#__PURE__*/React.createElement(ImagePopup,{card:selectedCard,onClose:closeAllPopups}))));}export default App;","map":{"version":3,"sources":["/Users/william/Documents/Programming/Practicum/react-around-auth/src/components/App.js"],"names":["React","Route","Switch","NavLink","useRouteMatch","useParams","Header","Main","Footer","PopupWithForm","ImagePopup","api","CurrentUserContext","EditProfilePopup","EditAvatarPopup","AddPlacePopup","App","useState","currentUser","setCurrentUser","useEffect","getUserInfo","then","res","catch","err","console","log","isEditProfileOpen","setIsEditProfileOpen","isAddPlaceOpen","setIsAddPlaceOpen","isEditAvatarOpen","setIsEditAvatarOpen","selectedCard","setSelectedCard","handleEditAvatarClick","handleEditProfileClick","handleAddPlaceClick","closeAllPopups","handleCardClick","card","handleUpdateUser","newInfo","patchUserInfo","handleUpdateAvatar","avatar","patchUserPic","cards","setCards","getInitialCards","handleCardLike","isLiked","likes","some","i","_id","likeCard","newCards","map","c","handleCardDelete","deleteCard","filter","handleAddPlace","addNewCard"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Route, Switch, NavLink, useRouteMatch, useParams } from 'react-router-dom';\nimport Header from './Header.js';\nimport Main from './Main.js';\nimport Footer from './Footer.js';\nimport PopupWithForm from './PopupWithForm.js';\nimport ImagePopup from './ImagePopup.js';\nimport api from '../utils/api.js';\nimport CurrentUserContext from '../contexts/CurrentUserContext.js';\nimport EditProfilePopup from './EditProfilePopup.js';\nimport EditAvatarPopup from './EditAvatarPopup.js';\nimport AddPlacePopup from './AddPlacePopup.js';\n\nfunction App() {\n\n    // State variable fot the current user's info\n    const [currentUser, setCurrentUser] = React.useState({});\n    // The effect hook with an empty second parameter will update once upon mounting,\n    // i.e. one update after the API call\n    React.useEffect(() => {\n        api.getUserInfo()\n            .then((res) => {setCurrentUser(res);})\n            .catch((err) => {console.log(err)});\n    }, []);\n\n\n    // Declaration of three hooks that act as state variables for the visibility of each form\n    const [isEditProfileOpen, setIsEditProfileOpen] = React.useState(false);\n    const [isAddPlaceOpen, setIsAddPlaceOpen] = React.useState(false);\n    const [isEditAvatarOpen, setIsEditAvatarOpen] = React.useState(false);\n\n    // Selected card hook for state of Image Popup\n    const [selectedCard, setSelectedCard] = React.useState(null);\n    \n    function handleEditAvatarClick() {\n        setIsEditAvatarOpen(true);\n    }\n\n    function handleEditProfileClick() {\n        setIsEditProfileOpen(true);\n    }\n    \n    function handleAddPlaceClick() {\n        setIsAddPlaceOpen(true);\n    }\n\n    function closeAllPopups() {\n        setIsEditAvatarOpen(false);\n        setIsEditProfileOpen(false);\n        setIsAddPlaceOpen(false);\n        setSelectedCard(null);\n    }\n\n    function handleCardClick(card) {\n        setSelectedCard(card);\n    }\n\n    function handleUpdateUser(newInfo) {\n        api.patchUserInfo(newInfo)\n            .then((res) => {setCurrentUser(res)})\n            .catch((err) => {console.log(err)});\n    }\n\n    function handleUpdateAvatar(avatar) {\n        api.patchUserPic(avatar)\n            .then((res) => {setCurrentUser(res)})\n            .catch((err) => {console.log(err)});\n    }\n\n    // Card variables and functions\n\n    // Declaration of hooks that act as state variables for cards\n    const [cards, setCards] = React.useState([]);\n\n    // Effect hook for updating of user info and cards\n    React.useEffect(() => {\n        api.getInitialCards()\n            .then((res) => {setCards(res);})\n            .catch((err) => {console.log(err)});\n    }, []);\n    \n    function handleCardLike(card) {\n        const isLiked = card.likes.some(i => i._id === currentUser._id);\n        api.likeCard(card, isLiked)\n            .then((res) => {\n                const newCards = cards.map((c) => c._id === card._id ? res : c);\n                setCards(newCards);\n            })\n            .catch((err) => { console.log(err) });\n    }\n\n    function handleCardDelete(card) {\n        api.deleteCard(card._id)\n            .then(() => {\n                const newCards = cards.filter((c) => c._id !== card._id);\n                setCards(newCards);\n            });\n    }\n\n    function handleAddPlace(card) {\n        api.addNewCard(card)\n            .then((res) => {\n                const newCards = [...cards, res];\n                setCards(newCards);\n            });\n    }\n    \n    return (\n        <CurrentUserContext.Provider value={currentUser}>\n            {/* Header section */}\n            <Header />\n\n            <Switch>\n                <Route exact path='/'>\n                    {/* Main content */}\n                    <Main onEditProfile={handleEditProfileClick} onAddPlace={handleAddPlaceClick} onEditAvatar={handleEditAvatarClick} \n                        onCardClick={handleCardClick} onClose={closeAllPopups} cards={cards} onCardLike={handleCardLike} onCardDelete={handleCardDelete} />\n\n                    {/* Footer section */}\n                    <Footer />\n\n                    {/* Popup Edit User Info Form */}\n                    <EditProfilePopup isOpen={isEditProfileOpen} onClose={closeAllPopups} onUpdateUser={handleUpdateUser} />\n\n                    {/* Popup Edit User Pic Form */}\n                    <EditAvatarPopup isOpen={isEditAvatarOpen} onClose={closeAllPopups} onUpdateAvatar={handleUpdateAvatar} />\n\n                    {/* Popup Add Form */}\n                    <AddPlacePopup isOpen={isAddPlaceOpen} onClose={closeAllPopups} onAddPlace={handleAddPlace}/>\n\n                    {/* Popup Delete Form */}\n                    <PopupWithForm name=\"form-delete\" title=\"Are you sure?\" isOpen={null} btnText=\"Yes\" onClose={closeAllPopups} />\n\n                    {/* Image Popup */}\n                    <ImagePopup card={selectedCard} onClose={closeAllPopups} />\n                </Route>\n            </Switch>\n            \n        </CurrentUserContext.Provider>\n    );\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}