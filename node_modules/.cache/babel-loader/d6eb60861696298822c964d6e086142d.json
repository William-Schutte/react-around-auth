{"ast":null,"code":"import _classCallCheck from\"/Users/william/Documents/Programming/Practicum/react-around-auth/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/william/Documents/Programming/Practicum/react-around-auth/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";// ###########################  API Class  ########################################################\nvar Api=/*#__PURE__*/function(){function Api(options){_classCallCheck(this,Api);this.options=options;}// Function replaced by getUser in auth\n_createClass(Api,[{key:\"getUserInfo\",value:function getUserInfo(token){return fetch(\"\".concat(this.options.baseUrl,\"/user\"),{method:\"GET\",headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \".concat(token)}}).then(function(res){if(res.status===200){return res.json().data;}else{return Promise.reject(\"Error: \".concat(res.status));}});}},{key:\"patchUserInfo\",value:function patchUserInfo(_ref){var newName=_ref.name,newAbout=_ref.about,token=_ref.token;return fetch(\"\".concat(this.options.baseUrl,\"/user/me\"),{method:\"PATCH\",headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \".concat(token)},body:JSON.stringify({\"name\":newName,\"about\":newAbout})}).then(function(res){if(res.status===200){console.log(res);return res.json().data;}else{return Promise.reject(\"Error: \".concat(res.status));}});}},{key:\"patchUserPic\",value:function patchUserPic(_ref2){var newUrl=_ref2.avatar;return fetch(\"\".concat(this.options.baseUrl,\"/user/me/avatar\"),{method:\"PATCH\",credentials:\"include\",mode:\"no-cors\",headers:this.options.headers,body:JSON.stringify({\"avatar\":newUrl})}).then(function(res){if(res.ok){return res.json();}else{return Promise.reject(\"Error: \".concat(res.status));}});}},{key:\"getInitialCards\",value:function getInitialCards(token){return fetch(\"\".concat(this.options.baseUrl,\"/cards\"),{method:\"GET\",headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \".concat(token)}}).then(function(res){if(res.ok){return res.json().data;}else{return Promise.reject(\"Error: \".concat(res.status));}});}},{key:\"addNewCard\",value:function addNewCard(_ref3){var newName=_ref3.name,newLink=_ref3.link;return fetch(\"\".concat(this.options.baseUrl,\"/cards\"),{method:\"POST\",credentials:\"include\",mode:\"no-cors\",headers:this.options.headers,body:JSON.stringify({name:newName,link:newLink})}).then(function(res){if(res.ok){return res.json();}else{return Promise.reject(\"Error: \".concat(res.status));}});}},{key:\"deleteCard\",value:function deleteCard(cardId){return fetch(\"\".concat(this.options.baseUrl,\"/cards/\").concat(cardId),{method:\"DELETE\",credentials:\"include\",mode:\"no-cors\",headers:this.options.headers}).then(function(res){if(res.ok){return res.json();}else{return Promise.reject(\"Error: \".concat(res.status));}});}},{key:\"likeCard\",value:function likeCard(cardData,isLiked){// If the card is already liked by the user, the like is removed, else a like is added\nif(isLiked){return fetch(\"\".concat(this.options.baseUrl,\"/cards/likes/\").concat(cardData._id),{method:\"DELETE\",credentials:\"include\",mode:\"no-cors\",headers:this.options.headers}).then(function(res){if(res.ok){return res.json();}else{return Promise.reject(\"Error: \".concat(res.status));}});}else{return fetch(\"\".concat(this.options.baseUrl,\"/cards/likes/\").concat(cardData._id),{method:\"PUT\",credentials:\"include\",mode:\"no-cors\",headers:this.options.headers}).then(function(res){if(res.ok){return res.json();}else{return Promise.reject(\"Error: \".concat(res.status));}});}}}]);return Api;}();var api=new Api({baseUrl:\"https://api.ws.p15.students.nomoreparties.site\",headers:{\"Content-Type\":\"application/json\"}});// const api = new Api({\n//     baseUrl: \"https://around.nomoreparties.co/v1/group-1\",\n//     headers: {\n//         authorization: \"b3ddd9c8-cc64-4470-93b1-0840e92522c5\",\n//         \"Content-Type\": \"application/json\"\n//     }\n// });\nexport default api;","map":{"version":3,"sources":["/Users/william/Documents/Programming/Practicum/react-around-auth/src/utils/api.js"],"names":["Api","options","token","fetch","baseUrl","method","headers","then","res","status","json","data","Promise","reject","newName","name","newAbout","about","body","JSON","stringify","console","log","newUrl","avatar","credentials","mode","ok","newLink","link","cardId","cardData","isLiked","_id","api"],"mappings":"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","sourcesContent":["// ###########################  API Class  ########################################################\n\nclass Api {\n    constructor(options) {\n      this.options = options;\n    }\n  \n    // Function replaced by getUser in auth\n    getUserInfo(token) {\n        return fetch(`${this.options.baseUrl}/user`, {\n            method: \"GET\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Authorization\": `Bearer ${token}`\n            },\n        })\n          .then(res => {\n            if (res.status === 200) {\n                return res.json().data;\n            } else {\n                return Promise.reject(`Error: ${res.status}`);\n            }\n          });\n    }\n\n    patchUserInfo({ name: newName, about: newAbout, token }) {\n        return fetch(`${this.options.baseUrl}/user/me`, {\n            method: \"PATCH\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Authorization\": `Bearer ${token}`\n            },\n            body: JSON.stringify({ \"name\": newName, \"about\": newAbout })\n        })\n            .then(res => {\n                if (res.status === 200) {\n                    console.log(res);\n                    return res.json().data;\n                } else {\n                    return Promise.reject(`Error: ${res.status}`);\n                }\n            });\n    }\n\n    patchUserPic({ avatar: newUrl }) {\n        return fetch(`${this.options.baseUrl}/user/me/avatar`, {\n            method: \"PATCH\",\n            credentials: \"include\",\n            mode: \"no-cors\",\n            headers: this.options.headers,\n            body: JSON.stringify({ \"avatar\": newUrl })\n        })\n            .then(res => {\n                if (res.ok) {\n                    return res.json();\n                } else {\n                    return Promise.reject(`Error: ${res.status}`);\n                }\n            });\n    }\n\n    getInitialCards(token) {\n        return fetch(`${this.options.baseUrl}/cards`, {\n            method: \"GET\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Authorization\": `Bearer ${token}`\n            },\n        })\n          .then(res => {\n            if (res.ok) {\n                return res.json().data;\n            } else {\n                return Promise.reject(`Error: ${res.status}`);\n            }\n          });\n    }\n    \n    addNewCard({ name: newName, link: newLink }) {\n        return fetch(`${this.options.baseUrl}/cards`, {\n            method: \"POST\",\n            credentials: \"include\",\n            mode: \"no-cors\",\n            headers: this.options.headers,\n            body: JSON.stringify({ name: newName, link: newLink })\n          })\n            .then(res => {\n              if (res.ok) {\n                  return res.json();\n              } else {\n                  return Promise.reject(`Error: ${res.status}`);\n              }\n            });\n    }\n\n    deleteCard(cardId) {\n        return fetch(`${this.options.baseUrl}/cards/${cardId}`, {\n            method: \"DELETE\",\n            credentials: \"include\",\n            mode: \"no-cors\",\n            headers: this.options.headers,\n        })\n            .then(res => {\n                if (res.ok) {\n                    return res.json();\n                } else {\n                    return Promise.reject(`Error: ${res.status}`);\n                }\n            });\n    }\n\n    likeCard(cardData, isLiked) {\n        // If the card is already liked by the user, the like is removed, else a like is added\n        if (isLiked) {\n            return fetch(`${this.options.baseUrl}/cards/likes/${cardData._id}`, {\n                method: \"DELETE\",\n                credentials: \"include\",\n                mode: \"no-cors\",\n                headers: this.options.headers,\n            })\n                .then(res => {\n                    if (res.ok) {\n                        return res.json();\n                    } else {\n                        return Promise.reject(`Error: ${res.status}`);\n                    }\n                });\n        } else {\n            return fetch(`${this.options.baseUrl}/cards/likes/${cardData._id}`, {\n                method: \"PUT\",\n                credentials: \"include\",\n                mode: \"no-cors\",\n                headers: this.options.headers,\n            })\n                .then(res => {\n                    if (res.ok) {\n                        return res.json();\n                    } else {\n                        return Promise.reject(`Error: ${res.status}`);\n                    }\n                });\n        }\n        \n    }\n}\n\nconst api = new Api({\n    baseUrl: \"https://api.ws.p15.students.nomoreparties.site\",\n    headers: {\n        \"Content-Type\": \"application/json\",\n    }\n});\n\n// const api = new Api({\n//     baseUrl: \"https://around.nomoreparties.co/v1/group-1\",\n//     headers: {\n//         authorization: \"b3ddd9c8-cc64-4470-93b1-0840e92522c5\",\n//         \"Content-Type\": \"application/json\"\n//     }\n// });\n\nexport default api;"]},"metadata":{},"sourceType":"module"}