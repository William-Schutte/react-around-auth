(this["webpackJsonpreact-test"]=this["webpackJsonpreact-test"]||[]).push([[0],{18:function(e,t,a){e.exports=a.p+"static/media/header-logo.8f7611ae.svg"},23:function(e,t,a){e.exports=a(34)},28:function(e,t,a){},34:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(17),c=a.n(o),i=a(12),l=(a(28),a(22)),s=a(5),u=a(1),m=a(18),d=a.n(m);var f=function(){return r.a.createElement("header",{className:"header"},r.a.createElement("img",{className:"header__logo",src:d.a,alt:"Around the U.S. Logo"}))},p=r.a.createContext();var h=function(e){var t=r.a.useContext(p),a=e.card.owner._id===t._id,n="card__delete-button ".concat(a?"card__delete-button_visible":"card__delete-button_hidden"),o=e.card.likes.some((function(e){return e._id===t._id})),c="card__fav-button ".concat(o&&"card__fav-button_active");return r.a.createElement("li",{className:"card"},r.a.createElement("div",{className:"card__image",style:{backgroundImage:"url(".concat(e.card.link,")")},onClick:function(){e.onCardClick(e.card)}}),r.a.createElement("button",{type:"button","aria-label":"Card Delete Button",className:n,onClick:function(){e.onCardDelete(e.card)}}),r.a.createElement("div",{className:"card__overlay"},r.a.createElement("h2",{className:"card__name"},e.card.name),r.a.createElement("div",{className:"card__like-column"},r.a.createElement("button",{type:"button","aria-label":"Card Favorite Button",className:c,onClick:function(){e.onCardLike(e.card)}}),r.a.createElement("p",{className:"card__like-count"},e.card.likes.length))))};var _=function(e){var t=r.a.useContext(p);return r.a.createElement("main",{className:"content"},r.a.createElement("section",{className:"profile"},r.a.createElement("button",{type:"button",className:"profile__pic-button",onClick:e.onEditAvatar}),r.a.createElement("div",{className:"profile__picture",style:{backgroundImage:"url(".concat(t.avatar,")")},alt:"My Profile Pic"}),r.a.createElement("div",{className:"profile__info"},r.a.createElement("h1",{className:"profile__name"},t.name),r.a.createElement("p",{className:"profile__occupation"},t.about)),r.a.createElement("button",{type:"button","aria-label":"Edit Profile Button",className:"profile__edit-button btn-animate",onClick:e.onEditProfile}),r.a.createElement("button",{type:"button","aria-label":"Add Card Button",className:"profile__add-button btn-animate",onClick:e.onAddPlace})),r.a.createElement("section",{className:"cards"},r.a.createElement("ul",{className:"cards__container"},e.cards.map((function(t){return r.a.createElement(h,{key:t._id,card:t,onCardClick:e.onCardClick,onCardLike:e.onCardLike,onCardDelete:e.onCardDelete,onClose:e.onClose})})))))};var b=function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("p",{className:"footer__copyright"},"\xa92020 William Schutte. Around the U.S."))};var E=function(e){return r.a.createElement("form",{className:"form ".concat(e.name," ").concat(e.isOpen&&"popup-opened"),name:e.name,onSubmit:e.onSubmit},r.a.createElement("div",{className:"form__container"},r.a.createElement("h2",{className:"form__title"},e.title),e.children,r.a.createElement("button",{type:"submit",className:"form__save-button btn-animate"},e.btnText),r.a.createElement("button",{type:"button","aria-label":"Close Form Button",className:"form__exit-button btn-animate",onClick:e.onClose})))};var v=function(e){var t=e.card,a=e.onClose;return r.a.createElement("div",{className:"picture ".concat(t&&"popup-opened")},r.a.createElement("div",{className:"picture__column"},r.a.createElement("img",{className:"picture__img",src:t?t.link:"",alt:t?t.name:""}),r.a.createElement("h2",{className:"picture__title"},t&&t.name),r.a.createElement("button",{type:"button","aria-label":"Close Picture Button",className:"form__exit-button btn-animate",onClick:a})))},C=a(19),N=a(20),k=new(function(){function e(t){Object(C.a)(this,e),this.options=t}return Object(N.a)(e,[{key:"getUserInfo",value:function(){return fetch("".concat(this.options.baseUrl,"/users/me"),{headers:this.options.headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"patchUserInfo",value:function(e){var t=e.name,a=e.about;return fetch("".concat(this.options.baseUrl,"/users/me"),{method:"PATCH",headers:this.options.headers,body:JSON.stringify({name:t,about:a})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"patchUserPic",value:function(e){var t=e.avatar;return fetch("".concat(this.options.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this.options.headers,body:JSON.stringify({avatar:t})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"getInitialCards",value:function(){return fetch("".concat(this.options.baseUrl,"/cards"),{headers:this.options.headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"addNewCard",value:function(e){var t=e.name,a=e.link;return fetch("".concat(this.options.baseUrl,"/cards"),{method:"POST",headers:this.options.headers,body:JSON.stringify({name:t,link:a})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"deleteCard",value:function(e){return fetch("".concat(this.options.baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this.options.headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"likeCard",value:function(e,t){return t?fetch("".concat(this.options.baseUrl,"/cards/likes/").concat(e._id),{method:"DELETE",headers:this.options.headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})):fetch("".concat(this.options.baseUrl,"/cards/likes/").concat(e._id),{method:"PUT",headers:this.options.headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}}]),e}())({baseUrl:"https://around.nomoreparties.co/v1/group-1",headers:{authorization:"b3ddd9c8-cc64-4470-93b1-0840e92522c5","Content-Type":"application/json"}});var g=function(e){var t=r.a.useContext(p);r.a.useEffect((function(){c(t.name),m(t.about)}),[t]);var a=r.a.useState(t.name),n=Object(s.a)(a,2),o=n[0],c=n[1],i=r.a.useState(t.about),l=Object(s.a)(i,2),u=l[0],m=l[1];return r.a.createElement(E,{name:"form-edit",title:"Edit profile",isOpen:e.isOpen,btnText:"Save",onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onUpdateUser({name:o,about:u}),e.onClose()}},r.a.createElement("label",{className:"form__input-field"},r.a.createElement("input",{id:"form-name",name:"primary",className:"form__name form__input",type:"text",value:o,onChange:function(e){c(e.target.value)},required:!0,minLength:"2",maxLength:"40",pattern:"[A-Za-z -]*"}),r.a.createElement("span",{id:"form-name-error",className:"form__error"})),r.a.createElement("label",{className:"form__input-field"},r.a.createElement("input",{id:"form-occupation",name:"secondary",className:"form__occupation form__input secondary",type:"text",value:u,onChange:function(e){m(e.target.value)},required:!0,minLength:"2",maxLength:"200"}),r.a.createElement("span",{id:"form-occupation-error",className:"form__error"})))};var y=function(e){var t=r.a.useContext(p),a=r.a.useRef();return r.a.createElement(E,{name:"form-pic",title:"Change userpic",isOpen:e.isOpen,btnText:"Save",onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onUpdateAvatar({avatar:a.current.value}),e.onClose(),a.current.value=null}},r.a.createElement("label",{className:"form__input-field"},r.a.createElement("input",{ref:a,id:"form-name",name:"primary",className:"form__name form__input",type:"url",placeholder:t.avatar,required:!0}),r.a.createElement("span",{id:"form-name-error",className:"form__error"})))};var j=function(e){var t=r.a.useState(null),a=Object(s.a)(t,2),n=a[0],o=a[1],c=r.a.useState(null),i=Object(s.a)(c,2),l=i[0],u=i[1];return r.a.createElement(E,{name:"form-add",title:"New place",isOpen:e.isOpen,btnText:"Create",onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onAddPlace({name:n,link:l}),e.onClose()}},r.a.createElement("label",{className:"form__input-field"},r.a.createElement("input",{id:"form-place",name:"primary",className:"form__place form__input",type:"text",placeholder:"Title",value:n,onChange:function(e){o(e.target.value)},required:!0,minLength:"1",maxLength:"30"}),r.a.createElement("span",{id:"form-place-error",className:"form__error"})),r.a.createElement("label",{className:"form__input-field"},r.a.createElement("input",{id:"form-url",name:"secondary",className:"form__url form__input",type:"url",placeholder:"Image link",value:l,onChange:function(e){u(e.target.value)},required:!0}),r.a.createElement("span",{id:"form-url-error",className:"form__error"})))};var O=function(){var e=r.a.useState({}),t=Object(s.a)(e,2),a=t[0],n=t[1];r.a.useEffect((function(){k.getUserInfo().then((function(e){n(e)})).catch((function(e){console.log(e)}))}),[]);var o=r.a.useState(!1),c=Object(s.a)(o,2),i=c[0],m=c[1],d=r.a.useState(!1),h=Object(s.a)(d,2),C=h[0],N=h[1],O=r.a.useState(!1),P=Object(s.a)(O,2),S=P[0],U=P[1],x=r.a.useState(null),A=Object(s.a)(x,2),w=A[0],L=A[1];function T(){U(!1),m(!1),N(!1),L(null)}var D=r.a.useState([]),I=Object(s.a)(D,2),B=I[0],q=I[1];return r.a.useEffect((function(){k.getInitialCards().then((function(e){q(e)})).catch((function(e){console.log(e)}))}),[]),r.a.createElement(p.Provider,{value:a},r.a.createElement(f,null),r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"/"},r.a.createElement(_,{onEditProfile:function(){m(!0)},onAddPlace:function(){N(!0)},onEditAvatar:function(){U(!0)},onCardClick:function(e){L(e)},onClose:T,cards:B,onCardLike:function(e){var t=e.likes.some((function(e){return e._id===a._id}));k.likeCard(e,t).then((function(t){var a=B.map((function(a){return a._id===e._id?t:a}));q(a)})).catch((function(e){console.log(e)}))},onCardDelete:function(e){k.deleteCard(e._id).then((function(){var t=B.filter((function(t){return t._id!==e._id}));q(t)}))}}),r.a.createElement(b,null),r.a.createElement(g,{isOpen:i,onClose:T,onUpdateUser:function(e){k.patchUserInfo(e).then((function(e){n(e)})).catch((function(e){console.log(e)}))}}),r.a.createElement(y,{isOpen:S,onClose:T,onUpdateAvatar:function(e){k.patchUserPic(e).then((function(e){n(e)})).catch((function(e){console.log(e)}))}}),r.a.createElement(j,{isOpen:C,onClose:T,onAddPlace:function(e){k.addNewCard(e).then((function(e){var t=[].concat(Object(l.a)(B),[e]);q(t)}))}}),r.a.createElement(E,{name:"form-delete",title:"Are you sure?",isOpen:null,btnText:"Yes",onClose:T}),r.a.createElement(v,{card:w,onClose:T}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(i.a,null,r.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[23,1,2]]]);
//# sourceMappingURL=main.99142a67.chunk.js.map